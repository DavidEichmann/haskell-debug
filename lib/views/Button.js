"use strict";
const emissary = require("emissary");
class Button {
    constructor(description, icon) {
        this.emitter = new emissary.Emitter();
        this.startClick = false;
        this._isEnabled = true;
        this.element = document.createElement("button");
        this.element.className = "btn btn-primary icon";
        this.element.classList.add("icon-" + icon);
        this.tooltip = atom.tooltips.add(this.element, {
            title: description
        });
        this.element.addEventListener("mousedown", () => {
            this.startClick = true;
        });
        this.element.addEventListener("click", () => {
            if (this.startClick && this._isEnabled)
                this.emitter.emit("click", null);
        });
    }
    set isEnabled(enabled) {
        if (enabled) {
            this.element.classList.remove("disabled");
        }
        else {
            this.element.classList.add("disabled");
        }
        this._isEnabled = enabled;
    }
    destroy() {
        this.tooltip.dispose();
    }
}
module.exports = Button;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnV0dG9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi92aWV3cy9CdXR0b24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHFDQUFxQztBQUVyQztJQXNCSSxZQUFZLFdBQW1CLEVBQUUsSUFBWTtRQXBCN0MsWUFBTyxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2pDLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFDWCxlQUFVLEdBQUcsSUFBSSxDQUFDO1FBbUJ0QixJQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFaEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsc0JBQXNCLENBQUM7UUFDaEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsQ0FBQztRQUUzQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDM0MsS0FBSyxFQUFFLFdBQVc7U0FDckIsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUU7WUFDdkMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUE7UUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtZQUNuQyxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2xDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN4QyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFoQ0QsSUFBSSxTQUFTLENBQUMsT0FBZ0I7UUFDMUIsRUFBRSxDQUFBLENBQUMsT0FBTyxDQUFDLENBQUEsQ0FBQztZQUNSLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBQ0QsSUFBSSxDQUFBLENBQUM7WUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDM0MsQ0FBQztRQUVELElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDO0lBQzlCLENBQUM7SUFFRCxPQUFPO1FBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQixDQUFDO0NBb0JKO0FBRUQsaUJBQVMsTUFBTSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVtaXNzYXJ5ID0gcmVxdWlyZShcImVtaXNzYXJ5XCIpXG5cbmNsYXNzIEJ1dHRvbntcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBlbWl0dGVyID0gbmV3IGVtaXNzYXJ5LkVtaXR0ZXIoKTtcbiAgICBzdGFydENsaWNrID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfaXNFbmFibGVkID0gdHJ1ZTtcbiAgICBwcml2YXRlIHRvb2x0aXA6IEF0b21Db3JlLkRpc3Bvc2FibGU7XG5cbiAgICBzZXQgaXNFbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4pe1xuICAgICAgICBpZihlbmFibGVkKXtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pc0VuYWJsZWQgPSBlbmFibGVkO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKXtcbiAgICAgICAgdGhpcy50b29sdGlwLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihkZXNjcmlwdGlvbjogc3RyaW5nLCBpY29uOiBzdHJpbmcpe1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBcImJ0biBidG4tcHJpbWFyeSBpY29uXCI7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaWNvbi1cIiArIGljb24pO1xuXG4gICAgICAgIHRoaXMudG9vbHRpcCA9IGF0b20udG9vbHRpcHMuYWRkKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgdGl0bGU6IGRlc2NyaXB0aW9uXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydENsaWNrID0gdHJ1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXJ0Q2xpY2sgJiYgdGhpcy5faXNFbmFibGVkKVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5lbWl0KFwiY2xpY2tcIiwgbnVsbClcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgPSBCdXR0b247XG4iXX0=